RewriteEngine On
RewriteBase /

# 1. Entferne .html aus URL (z. B. /about.html → /about) nur wenn Datei existiert
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.+)\.html$ /$1 [R=301,L]

# 2. Wenn keine Datei existiert, aber passende .html-Datei vorhanden ist → /about → /about.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|webp|svg|gif|ico|woff2?)$ [NC]
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([a-zA-Z0-9/_-]+)/?$ $1.html [L]

# 3. /en/... → englische Dateien (z. B. /en/about → about.html) nur wenn Datei existiert
RewriteCond %{REQUEST_URI} ^/en/(.+)$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^en/(.+)$ /%1.html [L]

# 5. Fallback 404
ErrorDocument 404 /404.html
